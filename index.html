<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VU+ Remote Control</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
        integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w=="
        crossorigin="anonymous" />
    <link rel="stylesheet" href="style.css?v=3">
</head>

<body>
    <!--container-->
    <div class="container">
        <div class="d-flex flex-row justify-content-between px-3 py-4 align-items-center">
            <!-- <button class="fas fa-chevron-left"></button> -->
            <span><a href="/">VU+</a></span>
            <span id="log"></span>
            <!-- <button class="fas fa-ellipsis-h"></button> -->
        </div>

        <div class="d-flex flex-row justify-content-center">
            <div class="menu-grid col4">
                <button class="d-flex flex-column align-items-center rcb" data-rc-cmd="power">
                    <i class="fas fa-power-off active"></i>
                    <!-- <span class="label">Power</span> -->
                </button>
                <button class="d-flex flex-column align-items-center rcb" data-rc-cmd="mute">
                    <i class="fas fa-volume-mute"></i>
                    <!-- <span class="label">Mute</span> -->
                </button>
                <button class="d-flex flex-column align-items-center rcb" data-rc-cmd="menu">
                    <i class="fas fa-cog"></i>
                    <!-- <span class="label">Menu</span> -->
                </button>
                <button class="d-flex flex-column align-items-center rcb" data-rc-cmd="exit">
                    <i class="fas fa-times-circle"></i>
                    <!-- <span class="label">Exit</span> -->
                </button>

                <button class="d-flex flex-column align-items-center rcb" data-rc-cmd="red">
                    <i class="fas fa-circle red"></i>
                </button>
                <button class="d-flex flex-column align-items-center rcb" data-rc-cmd="green">
                    <i class="fas fa-circle green"></i>
                </button>
                <button class="d-flex flex-column align-items-center rcb" data-rc-cmd="yellow">
                    <i class="fas fa-circle yellow"></i>
                </button>
                <button class="d-flex flex-column align-items-center rcb" data-rc-cmd="blue">
                    <i class="fas fa-circle blue"></i>
                </button>
            </div>
        </div>

        <div class="pt-4 position-relative d-flex flex-row justify-content-center align-items-center"
            style="margin-top: 100px; margin-bottom:100px">
            <div class="circle ok-outer position-absolute"></div>
            <button class="circle ok-inner position-absolute rcb" data-rc-cmd="enter">
                <span>OK</span>
            </button>
            <button class="fas fa-caret-right position-absolute control-icon right rcb" data-rc-cmd="right"></button>
            <button class="fas fa-caret-right position-absolute control-icon bottom rcb" data-rc-cmd="down"></button>
            <button class="fas fa-caret-right position-absolute control-icon left rcb" data-rc-cmd="left"></button>
            <button class="fas fa-caret-right position-absolute control-icon top rcb" data-rc-cmd="up"></button>
        </div>

        <div class="d-flex flex-row mt-4 justify-content-between px-2">
            <div class="d-flex flex-column rounded-bg py-3 px-4 justify-content-center align-items-center rc-col-bt">
                <button class="fas fa-plus py-3 control-icon rcb" data-rc-cmd="volumeUp"></button>
                <span class="label py-3">Volume</span>
                <button class="fas fa-minus py-3 control-icon rcb" data-rc-cmd="volumeDown"></button>
            </div>

            <div class="d-flex flex-column rounded-bg py-3 px-4 justify-content-center align-items-center rc-col-bt">
                <button class="fas fa-chevron-up py-3 control-icon rcb" data-rc-cmd="bouquetUp"></button>
                <span class="label py-3">Channel</span>
                <button class="fas fa-chevron-down py-3 control-icon rcb" data-rc-cmd="bouquetDown"></button>
            </div>
        </div>


        <div class="d-flex flex-row justify-content-center mt-4 mb-4">
            <div class="menu-grid col5">
                <button class="d-flex flex-column align-items-center rcb" data-rc-cmd="rewind">
                    <i class="fas fa-backward "></i>
                </button>
                <button class="d-flex flex-column align-items-center rcb" data-rc-cmd="play">
                    <i class="fas fa-play "></i>
                </button>
                <button class="d-flex flex-column align-items-center rcb" data-rc-cmd="pause">
                    <i class="fas fa-pause "></i>
                </button>
                <button class="d-flex flex-column align-items-center rcb" data-rc-cmd="stop">
                    <i class="fas fa-stop "></i>
                </button>
                <button class="d-flex flex-column align-items-center rcb" data-rc-cmd="fastForward">
                    <i class="fas fa-forward "></i>
                </button>
            </div>
        </div>
    </div>

    <script>

        commands = {
            "bouquetUp": 402,
            "bouquetDown": 403,
            "previous": 412,
            "next": 407,
            "up": 103,
            "down": 108,
            "left": 105,
            "right": 106,
            "enter": 352,
            "exit": 174,
            "volumeUp": 115,
            "volumeDown": 114,
            "mute": 113,
            "play": 164,
            "pause": 119,
            "stop": 128,
            "record": 167,
            "rewind": 168,
            "fastForward": 159,
            "menu": 139,
            "info": 358,
            "audio": 392,
            "video": 393,
            "tv": 377,
            "pvr": 366,
            "radio": 385,
            "text": 388,
            "help": 138,
            "1": 2,
            "2": 3,
            "3": 4,
            "4": 5,
            "5": 6,
            "6": 7,
            "7": 8,
            "8": 9,
            "9": 10,
            "0": 11,
            "red": 398,
            "green": 399,
            "yellow": 400,
            "blue": 401,
            "power": 116
        }

        //http://192.168.111.111/api/remotecontrol?command=358&_=1642374420569

        var buttons = document.querySelectorAll('.rcb');

        buttons.forEach((button) => {
            button.addEventListener('click', (event) => {
                var targetElement = event.srcElement;
                while (targetElement && !targetElement.getAttribute("data-rc-cmd"))
                    targetElement = targetElement.parentElement;

                if (targetElement) {
                    command = targetElement.getAttribute("data-rc-cmd");
                    commandId = commands[command];
                    logMessage = command;
                    if (commandId)
                        sendRcCommand(commandId);
                    else
                        logMessage += " (not found)";

                    //document.getElementById("log").innerText = logMessage;
                }
            });
        });


        function sendRcCommand(commandId) {
            var xhttp = new XMLHttpRequest();
            xhttp.open("GET", "/api/remotecontrol?command=" + commandId);
            xhttp.send();
        }

    </script>

</body>

</html>